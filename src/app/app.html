<!-- Main App Container -->
<div class="app-container" [class.dashboard-layout]="(layoutType$ | async) === 'dashboard'">

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Page Content -->
    <section class="page-content">

      <!-- Draggable Area -->
      <div class="draggable-area" #draggableArea>
        <!-- Dropzone Container -->
        <div class="dropzone-container">
          <!-- Dropzone 1: Priority Area -->
          <div
            class="dropzone priority-dropzone"
            uiDropzone>
            <!--              [draggableSelector]="'.colored-square'"-->
            <!--              [activeClass]="'priority-active'"-->
            <!--              [overlapThreshold]="0.5"-->
            <!--              (dragEnter)="onDragEnter($event, 'priority')"-->
            <!--              (dragOver)="onDragOver($event, 'priority')"-->
            <!--              (dragLeave)="onDragLeave($event, 'priority')"-->
            <!--              (drop)="onDrop($event, 'priority')"-->

            <div class="dropzone-content">
              <div class="dropzone-icon">⭐</div>
              <h3>Priority Zone</h3>
              <p class="dropzone-description">High priority items go here</p>

              <!-- Dropped items display -->
              <div class="dropped-items">
                @for (item of droppedItems.priority; track item.id) {
                  <div class="dropped-item" [style.background-color]="item.color">
                    {{ item.name }}
                  </div>
                }
              </div>

              <div class="dropzone-stats">
                <span class="stat">Items: {{ droppedItems.priority.length }}</span>
                <span class="stat">Last drop: {{ lastDropTime.priority | date:'HH:mm:ss' }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Draggable Squares -->
        @for (square of squares(); track square.id) {
          <div
            class="colored-square"
            [ngStyle]="getSquareStyles(square)"
            [style.zIndex]="square.id"
            appDraggable
            [dragHandle]="'.square-content'"
            [dragBoundary]="draggableArea"
            [dragSnapToGrid]="false"
            [dragUseTransform]="true"
            (dragStart)="onSquareDragStart($event, square.id)"
            (dragMove)="onSquareDragMove($event, square.id)"
            (dragEnd)="onSquareDragEnd($event, square.id)">

            <div class="square-content">
              <!-- Square Info -->
              <div class="square-info">
                <div class="square-name">{{ square.name }}</div>
                <div class="square-color" [style.background-color]="square.color"></div>
                <div class="square-id">#{{ square.id }}</div>
              </div>

              <!-- Drag Hint -->
              <div class="drag-hint">
                <span class="drag-icon">☰</span>
                <span class="drag-text">Drag me</span>
              </div>
            </div>
          </div>
        }
      </div>



      <!-- Router Outlet -->
      <router-outlet></router-outlet>
    </section>
  </main>
</div>
